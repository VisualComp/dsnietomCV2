<!DOCTYPE HTML>
<!--
	David Styven Nieto Marin
	Ingenieria de Sistemas | @dsnietom
	Universidad Nacional de Colombia
-->
<html>
	<head>
		<title>Pixeles e Imagenes | :: Computación Visual ::</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		
		<!-- Code-Prettify -->
		<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
		
		<!-- P5.js -->
		<script src="p5/p5.min.js"></script>
		<script src="p5/addons/p5.sound.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/addons/p5.sound.min.js"></script> -->
		
		<!-- Bootstrap CSS 
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">-->
	
		<!-- Favicon -->
		<link rel="icon" href="images/favicon.png" sizes="32x32" type="image/png">

		
	</head>
	
	<body class="single is-preload">
	
	

		<!-- Wrapper -->
			<div id="wrapper">
			

				<!-- Header -->
					<header id="header">
						
						<nav class="links">
						
						<!-- Se crea un encabezado para insertar el html donde esta el menu-->
							<iframe src="menu.html" ></iframe>
							
						</nav>
						<nav class="main">
							<ul>
								<li class="search">
									<a class="fa-search" href="#search">Search</a>
									<form id="search" method="get" action="#">
										<input type="text" name="query" placeholder="Search" />
									</form>
								</li>
								<li class="menu">
									<a class="fa-bars" href="#menu">Menu</a>
								</li>
							</ul>
						</nav>
					</header>

				<!-- Menu -->
					<section id="menu">

						<!-- Search -->
							<section>
							<h1><a href="index.html" target="_parent">Visual Computing</a></h1>
								<form class="search" method="get" action="#">
									<input type="text" name="query" placeholder="Search" />
								</form>
							</section>

						<!-- Links -->
							<section>
								<ul class="links">
									<li>
										<a href="images1.html" target="_parent">
											<h3>FIRST STEPS</h3>
											<p>Painting Backgrounds with Pixels</p>
										</a>
									</li>
									<li>
										<a href="images2.html" target="_parent">
											<h3>IMAGE PROCESSING WITH PIXELS</h3>
											<p>Load Images pixel by pixel</p>
										</a>
									</li>
									<li>
										<a href="images3.html" target="_parent">
											<h3>LANTERN</h3>
											<p>Alter the Brightness of an Image</p>
										</a>
									</li>
									<li>
										<a href="images4.html" target="_parent">
											<h3>BLACK AND WHITE</h3>
											<p>Gray filter modifying lightness</p>
										</a>
									</li>
									<li>
										<a href="images5.html" target="_parent">
											<h3>COMPLEMENTARY COLORS</h3>
											<p>createGraphics two Canvases in One</p>
										</a>
									</li>
									<li>
										<a href="images6.html" target="_parent">
											<h3>POINTILLISM</h3>
											<p>Fill Ellipses with the Color of a Pixel</p>
										</a>
									</li>
								</ul>
							</section>

						<!-- Actions -->
							<section>
								<ul class="actions stacked">
									<li><a href="#" class="button large fit">Log In</a></li>
								</ul>
							</section>

					</section>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<article class="post">
								<header>
									<div class="title">
										<h2><a href="https://en.wikipedia.org/wiki/HSL_and_HSV" target="_blank">Black and White</a></h2>
										<p>Gray filter modifying lightness</p>
									</div>
									<div class="meta">
										<time class="published" datetime="2015-11-01">April 02, 2020</time>
										<a href="https://dsnietom.github.io/myPageIngSoft/" target="_blank" class="author"><span class="name">David Nieto</span><img src="images/avatar.jpg" alt="dsnietom" /></a>
										
									</div>
								</header>
								<p>Los siguientes ejemplos tienen el propósito de practicar la transición entre el lenguaje Processing y el lenguaje p5.js por medio del uso de diferentes funciones y ejemplos relacionados con el procesamiento de imágenes.</p>

								<p>El siguiente programa esta basado en los aportes realizados en los anteriores ejemplos de procesamiento de imágenes con pixeles, en el que se observa la manera de modificar los componentes RGB de cada pixel (ejemplo <a href="images2.html" target="_parent">IMAGE PROCESSING WITH PIXELS</a>) para modificar la luminosidad y el brillo (ejemplo <a href="images3.html" target="_parent">LANTERN</a>)  de una imagen, y el estudio de la documentación <a href="https://en.wikipedia.org/wiki/HSL_and_HSV#Lightness" target="_blank">HSL and HSV</a> con el fin de modificar la luminancia de la imagen para convertirla en una imagen a escala de grises. Para el siguiente ejemplo se tuvo como propósito modificar una imagen para obtener una escala de grises de tres maneras distintas:</p>

								<ul>
									<li><strong>La media aritmética:</strong>  Para ellos se modifica el valor de cada pixel por el promedio de los tres componentes RGB del pixel original.</li>
										<div class="text-center">
											<img src="images/gray/equation1.png" style="height: 30px;vertical-align: middle"/>
										</div><br>
									<li><strong>El componente mas grande:</strong> Consiste en remplazar el valor de cada pixel por el valor del componente RGB más grade del pixel original.</li>
										<div class="text-center">
											<img src="images/gray/equation2.png" style="height: 23px;vertical-align: middle"/>
										</div><br>
									<li><strong>El rango medio:</strong> Se define como el promedio de los componentes de color RGB más grande y más pequeño, del pixel que se va a modificar.</li>
										<div class="text-center">
											<img src="images/gray/equation3.png" style="height: 30px;vertical-align: middle"/>
										</div>
								</ul>

								<p>Mas adelante, en el ejemplo <a href="pImages1.html" target="_parent">GRAYSCALE IMAGE</a>, se observará cómo obtener una escala de grises más perceptivamente relevante por medio del cálculo del coeficiente <strong><em>luma</em></strong>.</p>
								<hr />
								<h3>Comandos por teclado</h3>
								<div class="row">
										<div class="col-6 col-12-medium">										
											<ul>												
												<li><h4 style="display:inline"><em>Imagen original</em> = </h4><img src="images/keyboard/0.png" style="width:4%;vertical-align: middle"/></li>
												<li><h4 style="display:inline"><em>Media aritmética</em> = </h4><img src="images/keyboard/1.png" style="width:4%;vertical-align: middle"/></li>
												<li><h4 style="display:inline"><em>Componente mas grande</em> = </h4><img src="images/keyboard/2.png" style="width:4%;vertical-align: middle"/></li>
												<li><h4 style="display:inline"><em>Rango medio</em> = </h4><img src="images/keyboard/3.png" style="width:4%;vertical-align: middle"/></li>												
											</ul>									
										</div>
								</div>
								
								<div class="canvasp5js" >
									<div>
									<div id="pixelsGray">
									
									</div>
																										
								</div>
								<blockquote>Image of Fire breathing. Source: Wikipedia, the free encyclopedia.<p><strong>Fire breathing "Jaipur Maharaja Brass Band" Chassepierre Belgium</strong></p></blockquote>
								</div>
								<p></p>
								<h4>p5*js Code</h4>
									<pre><code class="prettyprint">let img; // Declarar variable 'img'
let lightness = 210; // Variable de luminancia
let gray=0;

function setup() { 
	createCanvas(800, 588);
	background(210);
	pixelDensity();
	img = loadImage('https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Fire_breathing_2_Luc_Viatour.jpg/800px-Fire_breathing_2_Luc_Viatour.jpg');
} 

function draw() {
	loadPixels();
	img.loadPixels();
	
	for (let y = 0; y &lt height; y++) {
		for (let x = 0; x &lt width; x++){ 
			let index = (x+y*width)*4; // Posicion del pixel
			let r=img.pixels[index+0]; // Componente Red
			let g=img.pixels[index+1]; // Componente Green
			let b=img.pixels[index+2]; // Componente Blue
			let a=img.pixels[index+3]; // Componente Alpha
			
			if (gray===1){
				let I=(r+g+b)/3; // Promedio de los tres componentes
				lightness = I;
			} else if (gray===2){
				let V= max(r,g,b); // Componente mas grande de un color
				lightness = V;
			} else if (gray===3){
				let L=(max(r,g,b)+min(r,g,b))/2; // Promedio entre el componente mas grande y el mas pequeño
				lightness = L;
			}
			//let Y= 0.2989*r + 0.5870*g + 0.1140*b; // promedio ponderado de RGB con corrección gamma (Luma)
						
			pixels[index+0]=lightness;
			pixels[index+1]=lightness;
			pixels[index+2]=lightness;
			pixels[index+3]=a;
			
			if (gray===0){ // Imagen original
				pixels[index+0]=r;
				pixels[index+1]=g;
				pixels[index+2]=b;
				pixels[index+3]=a;
			}
		}
	}
	updatePixels();
}

// Se ejecuta cuando se presiona cualquier tecla
function keyPressed() {
	if (key === '0') {
	gray = 0;
	} else if (key === '1') { 
	gray = 1;
	} else if (key === '2') {
	gray = 2;
	} else if (key === '3') {
	gray = 3;
	}
}</code></pre>
								
								<p></p>
								
								<!-- Pagination -->
							<ul class="actions pagination">
								<li><a href="images3.html" target="_parent" class="button large previous">Previous Page</a></li>
								<li><a href="images5.html" target="_parent" class="button large next">Next Page</a></li>
							</ul>
							
							<!-- Footer 
								<footer>
									<ul class="stats">
										<li><a href="#">General</a></li>
										<li><a href="#" class="icon solid fa-heart">28</a></li>
										<li><a href="#" class="icon solid fa-comment">128</a></li>
									</ul>
								</footer>-->
								
							</article>

					</div>

				<!-- Footer -->
					<section id="footer">
					<!-- Se crea un iframe para insertar el html donde esta el pie de pagina-->
						<footer>
							<iframe id="iframepie" src="footer.html"></iframe>
						</footer>
						
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			
		<!-- Ejemplos P5.js -->
			<script src="p5/js/pixels/pixelsGray.js"></script>

			
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
			<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

	</body>
</html>