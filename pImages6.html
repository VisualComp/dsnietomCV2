<!DOCTYPE HTML>
<!--
	David Styven Nieto Marin
	Ingenieria de Sistemas | @dsnietom
	Universidad Nacional de Colombia
-->
<html>
	<head>
		<title>Procesamiento de Imagenes | :: Computación Visual ::</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		
		<!-- Code-Prettify -->
		<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
		
		<!-- P5.js -->
		<script src="p5/p5.min.js"></script>
		<script src="p5/addons/p5.sound.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/addons/p5.sound.min.js"></script> -->
		
		<!-- Bootstrap CSS 
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">-->
	
		<!-- Favicon -->
		<link rel="icon" href="images/favicon.png" sizes="32x32" type="image/png">

		
	</head>
	
	<body class="single is-preload">
	
	

		<!-- Wrapper -->
			<div id="wrapper">
			

				<!-- Header -->
					<header id="header">
						
						<nav class="links">
						
						<!-- Se crea un encabezado para insertar el html donde esta el menu-->
							<iframe src="menu.html" ></iframe>
							
						</nav>
						<nav class="main">
							<ul>
								<li class="search">
									<a class="fa-search" href="#search">Search</a>
									<form id="search" method="get" action="#">
										<input type="text" name="query" placeholder="Search" />
									</form>
								</li>
								<li class="menu">
									<a class="fa-bars" href="#menu">Menu</a>
								</li>
							</ul>
						</nav>
					</header>

				<!-- Menu -->
				<section id="menu">

					<!-- Search -->
						<section>
						<h1><a href="index.html" target="_parent">Visual Computing</a></h1>
							<form class="search" method="get" action="#">
								<input type="text" name="query" placeholder="Search" />
							</form>
						</section>

					<!-- Links -->
						<section>
							<ul class="links">
								<li>
									<a href="pImages1.html" target="_parent">
										<h3>GRAYSCALE IMAGE</h3>
										<p>RGB AVERAGE AND LUMA COEFFICIENT</p>
									</a>
								</li>
								<li>
									<a href="pImages2.html" target="_parent">
										<h3>CONVOLUTION MATRIX</h3>
										<p>BLURRING, SHARPENING, EMBOSSING, EDGE DETECTION, AND MORE</p>
									</a>
								</li>
								<li>
									<a href="pImages3.html" target="_parent">
										<h3>IMAGE TO ASCII</h3>
										<p>CHANGE PIXELS FOR CHARACTERS</p>
									</a>
								</li>
								<li>
									<a href="pImages4.html" target="_parent">
										<h3>IMAGE HISTOGRAM</h3>
										<p>GRAPHICAL REPRESENTATION OF THE TONAL DISTRIBUTION</p>
									</a>
								</li>
								<li>
									<a href="pImages5.html" target="_parent">
										<h3>VIDEO PROCESSING</h3>
										<p>GRAYSCALE, MASKS AND COMPLEMENTARY COLORS</p>
									</a>
								</li>
								<li>
									<a href="pImages6.html" target="_parent">
										<h3>VIDEO TO ASCII</h3>
										<p>CHANGE PIXELS FOR CHARACTERS</p>
									</a>
								</li>
								<li>
									<a href="pImages7.html" target="_parent">
										<h3>COMPUTATIONAL EFFICIENCY</h3>
										<p>VIDEO OPERATIONS MEASUREMENT</p>
									</a>
								</li>
							</ul>
						</section>

					<!-- Actions -->
						<section>
							<ul class="actions stacked">
								<li><a href="https://github.com/VisualComp/Procesamiento-imagenes/tree/master/Software" target="_blank" class="button large fit">Repository</a></li>
							</ul>
						</section>

				</section>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<article class="post">
								<header>
									<div class="title">
										<h2><a href="https://processing.org/tutorials/video/" target="_blank">Video to ASCII</a></h2>
										<p>Change Pixels for Characters</p>
									</div>
									<div class="meta">
										<time class="published" datetime="2015-11-01">May 21, 2020</time>
										<a href="https://dsnietom.github.io/myPageIngSoft/" target="_blank" class="author"><span class="name">David Nieto</span><img src="images/avatar.jpg" alt="dsnietom" /></a>
										
									</div>
								</header>
								<p>Al igual que en el estudio de procesamiento de imágenes, que se vio el ejemplo <a href="pImages3.html" target="_parent">IMAGE TO ASCII</a>, se realizó la siguiente implementación que muestra cómo realizar el procesamiento de videos. Para este fin se crearon dos lienzos, el primero permite visualizar el video original que es capturado directamente de la webcam que tenga conectada a su dispositivo <strong><em>(permitir acceder a la cámara desde el navegador)</em></strong>, de manera similar a la que se explica en la documentación de <a href="https://processing.org/tutorials/video/" target="_blank">processing.org</a> y, el segundo lienzo se encarga de mostrar los cambios que se le realizan en tiempo real dependiendo de las teclas que se presionen, según la tabla de comandos por teclado.</p>
								
								<p>Este programa muestra los cambios que sufre un video al convertir sus pixeles por caracteres ASCII, darles color y contorno a los caracteres, utilizando el mismo algoritmo que permitió realizar el procesamiento de imágenes en el ejemplo descrito anteriormente, pero esta vez modificando los pixeles de una imagen capturada por video.</p>
								
								<hr />
								<h3>Comandos por teclado</h3>
								<div class="table-wrapper text-center">
									<table class="alt">
										<thead>
											<tr>
												<th>ASCII</th>
												<th>Caracteres a Color</th>
												<th>Bordes a Color</th>
												<th>Transición Horizontal</th>
												<th>Transición Diagonal</th>
												<th>Video Original</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td><img src="images/ascii/vid1.png" style="width:150px;vertical-align: middle"/></td>
												<td><img src="images/ascii/vid2.png" style="width:150px;vertical-align: middle"/></td>
												<td><img src="images/ascii/vid3.png" style="width:150px;vertical-align: middle"/></td>
												<td><img src="images/ascii/vid4.png" style="width:150px;vertical-align: middle"/></td>
												<td><img src="images/ascii/vid5.png" style="width:150px;vertical-align: middle"/></td>
												<td><img src="images/ascii/vid0.gif" style="width:150px;vertical-align: middle"/></td>
											</tr>
											<tr>
												<td><img src="images/keyboard/1.png" style="width:40px;vertical-align: middle"/></td>
												<td><img src="images/keyboard/2.png" style="width:40px;vertical-align: middle"/></td>
												<td><img src="images/keyboard/3.png" style="width:40px;vertical-align: middle"/></td>
												<td><img src="images/keyboard/4.png" style="width:40px;vertical-align: middle"/></td>
												<td><img src="images/keyboard/5.png" style="width:40px;vertical-align: middle"/></td>
												<td><em>Activar cámara Web</em></td>
											</tr>
										</tbody>
									</table>
								</div>
								
								<div class="canvasp5js" >
									<div>
										<blockquote>Image of Lioness and her Lion cub (Panthera leo) are a species in the family Felidae. Source: <a href="https://66.media.tumblr.com/6779b609703c61130d8d59fcad857310/tumblr_n66mdcOUan1rpe379o2_500.gif" target="_blank">Giphy</a>.<p><strong>Lion Hello GIF - Find & Share on GIPHY</strong></p></blockquote>
										<div id="asciiVideo">
										
										</div>																										
									</div>
								
								</div>
								<p></p>
								<h4>p5*js Code</h4>
									<pre><code class="prettyprint">let img; // Almacena la primera captura
let img_01; 
let resolution = 6; // Determina la resolucion del caracter

let lienzo01; // Lienzo donde se mostrara el codigo ascii
let lienzo02;   // Lienzo que mostrara el video original

const heightI = 512; // Define la altura de los lienzos
const widthI = 550; // Define la anchura de los lienzos

let letters = "@&$o%8#*+=-':. " ; // Cadena de caracteres ascii
let ascii=[];   // Almacena la cadena de caracteres
let intensity = 1; // Colores de los caracteres

function preload() {
	img = createCapture(VIDEO);
	img_01 = createCapture(VIDEO);
	img_01.hide(); //Ocultan los videos 
	img.hide();
}

function setup() { 
	var myCanvas = createCanvas(widthI*2 + 20, heightI);
	myCanvas.parent('asciiVideo');    
	background(255);
	lienzo01 = createGraphics(widthI, heightI);
	lienzo02 = createGraphics(widthI, heightI);
}

function draw(){
	lienzo01.textFont("Georgia", resolution + 2);
	lienzo01.background(255);
	calcArray();
	asciify();
	drawLienzo02();
	image(lienzo01, widthI + 10 ,0);
	image(lienzo02, 0, 0);
}


// Funciones diseñadas 
const calcArray = ()=>{ // Realiza el mapeo para almacenarlos en el array ascii

	for (let i = 0; i < 256; i++) {
		let index = int(map(i, 0, 256, 0, letters.length));
		ascii[i] = letters.charAt(index);
	}    
}

const drawLienzo02 = ()=>{ // Diagrama el video en el lienzo 2
	lienzo02.image(img_01,0,0);
}

const asciify = ()=>{ // Diagrama los caracteres en e lienzo 1  
	img.loadPixels();
	img_01.loadPixels();

	// Recorre todos los pixeles
	for (let y = 0; y < img.height; y += resolution) {
		for (let x = 0; x < img.width; x += resolution) {
			
			let index = (x+y*img.width)*4; // Posicion del pixel
			let r=img.pixels[index+0]; // Componente Red
			let g=img.pixels[index+1]; // Componente Green
			let b=img.pixels[index+2]; // Componente Blue
			let a=img.pixels[index+3]; // Componente Alpha
			// Componenetes sin modificaciones
			let R=img_01.pixels[index+0]; // Componente Red
			let G=img_01.pixels[index+1]; // Componente Green
			let B=img_01.pixels[index+2]; // Componente Blue
			let A=img_01.pixels[index+3]; // Componente Alpha

			asciiPaint(R,G,B,A,x,y); // Color de los caracteres            
			// Toma el color del n-simo pixel y lo reemplza con el caracter de brillo similar
			lienzo01.text(ascii[int(brightness(color(r,g,b,a)))], x, y); // Dibuja los caracteres
		}
	}
}
// Define el color de los caracteres ASCII
function asciiPaint(R,G,B,A,x,y){
	if (intensity===1){
		lienzo01.fill(0);
		lienzo01.noStroke();
	} else if (intensity===2){
		lienzo01.fill(R,G,B,A);
		lienzo01.noStroke();
	} else if (intensity===3){
		lienzo01.fill(R,G,B,A);
		lienzo01.stroke(R,G,B,A);
	} else if (intensity===4){
		if (x>floor(widthI/3)){
			lienzo01.fill(R,G,B,A);
		} else {
			lienzo01.fill(0);
		}
		if(x>floor(widthI/3)*2){
			lienzo01.stroke(R,G,B,A);
		} else {
			lienzo01.noStroke();
		}
	} else if (intensity===5){
		if (x/2+y*2>floor((widthI+heightI)/3)){
			lienzo01.fill(R,G,B,A);
		} else {
			lienzo01.fill(0);
		}
		if(x*2+y/2>floor((widthI+heightI)/3)*2){
			lienzo01.stroke(R,G,B,A);
		} else {
			lienzo01.noStroke();
		}
	}
}
// Se ejecuta cuando se presiona cualquier tecla
function keyPressed() {
	if (key === '0') { // Imagen original        
		lienzo01.image(img_01,0,0);
	} else if (key === '1') { // Caracteres en negro
		intensity=1;
	} else if (key === '2') { // Caracteres a color
		intensity=2;
	} else if (key === '3') { // Borde caracteres a color
		intensity=3;
	} else if (key === '4') { // Borde caracteres a color
		intensity=4;
	} else if (key === '5') { // Borde caracteres a color
		intensity=5;
	}
}</code></pre>								
								<p></p>
								
								<!-- Pagination -->
							<ul class="actions pagination">
								<li><a href="pImages5.html" target="_parent" class="button large previous">Previous Page</a></li>
								<li><a href="pImages7.html" target="_parent" class="button large next">Next Page</a></li>
							</ul>
							
							<!-- Footer 
								<footer>
									<ul class="stats">
										<li><a href="#">General</a></li>
										<li><a href="#" class="icon solid fa-heart">28</a></li>
										<li><a href="#" class="icon solid fa-comment">128</a></li>
									</ul>
								</footer>-->
								
							</article>

					</div>

				<!-- Footer -->
					<section id="footer">
					<!-- Se crea un iframe para insertar el html donde esta el pie de pagina-->
						<footer>
							<iframe id="iframepie" src="footer.html"></iframe>
						</footer>
						
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			
		<!-- Ejemplos P5.js -->
			<script src="p5/js/images/asciiVideo.js"></script>

			
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
			<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

	</body>
</html>